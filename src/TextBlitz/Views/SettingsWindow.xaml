<Window x:Class="TextBlitz.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:TextBlitz.Views"
        mc:Ignorable="d"
        Title="TextBlitz - Settings"
        Width="600" Height="700"
        MinWidth="500" MinHeight="550"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E2E">

    <Window.Resources>
        <ResourceDictionary>
            <SolidColorBrush x:Key="BackgroundBrush" Color="#1E1E2E" />
            <SolidColorBrush x:Key="SurfaceBrush" Color="#313244" />
            <SolidColorBrush x:Key="TextBrush" Color="#CDD6F4" />
            <SolidColorBrush x:Key="SubTextBrush" Color="#A6ADC8" />
            <SolidColorBrush x:Key="AccentBrush" Color="#89B4FA" />
            <SolidColorBrush x:Key="SuccessBrush" Color="#A6E3A1" />
            <SolidColorBrush x:Key="WarningBrush" Color="#F9E2AF" />
            <SolidColorBrush x:Key="ErrorBrush" Color="#F38BA8" />

            <Style x:Key="DarkTextBoxStyle" TargetType="TextBox">
                <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
                <Setter Property="Foreground" Value="{StaticResource TextBrush}" />
                <Setter Property="CaretBrush" Value="{StaticResource TextBrush}" />
                <Setter Property="BorderBrush" Value="#45475A" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="8,6" />
                <Setter Property="FontSize" Value="13" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4">
                                <ScrollViewer x:Name="PART_ContentHost" Margin="0" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="BaseButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
                <Setter Property="Foreground" Value="{StaticResource TextBrush}" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Padding" Value="16,8" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="FontSize" Value="13" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    CornerRadius="6"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#45475A" />
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter Property="Background" Value="#585B70" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.5" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="AccentButtonStyle" TargetType="Button" BasedOn="{StaticResource BaseButtonStyle}">
                <Setter Property="Background" Value="{StaticResource AccentBrush}" />
                <Setter Property="Foreground" Value="#1E1E2E" />
                <Setter Property="FontWeight" Value="SemiBold" />
            </Style>

            <Style x:Key="DarkCheckBoxStyle" TargetType="CheckBox">
                <Setter Property="Foreground" Value="{StaticResource TextBrush}" />
                <Setter Property="FontSize" Value="13" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="Margin" Value="0,0,0,8" />
            </Style>

            <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource TextBrush}" />
                <Setter Property="FontSize" Value="15" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Margin" Value="0,0,0,12" />
            </Style>

            <Style x:Key="FieldLabelStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource SubTextBrush}" />
                <Setter Property="FontSize" Value="11" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Margin" Value="0,0,0,4" />
            </Style>

            <Style x:Key="HintTextStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#585B70" />
                <Setter Property="FontSize" Value="11" />
                <Setter Property="Margin" Value="0,2,0,0" />
            </Style>

            <Style x:Key="ToggleRadioStyle" TargetType="RadioButton">
                <Setter Property="Foreground" Value="{StaticResource SubTextBrush}" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="RadioButton">
                            <Border x:Name="Bd"
                                    Background="{StaticResource SurfaceBrush}"
                                    CornerRadius="4"
                                    Padding="12,6"
                                    BorderBrush="#45475A"
                                    BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#45475A" />
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                                    <Setter Property="Foreground" Value="{StaticResource AccentBrush}" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#3A3A4E" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="SectionBorderStyle" TargetType="Border">
                <Setter Property="Background" Value="#181825" />
                <Setter Property="CornerRadius" Value="8" />
                <Setter Property="Padding" Value="16" />
                <Setter Property="Margin" Value="0,0,0,12" />
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0"
                      VerticalScrollBarVisibility="Auto"
                      Padding="24,16">
            <StackPanel>
                <!-- Account Section -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Account" Style="{StaticResource SectionHeaderStyle}" />
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                <TextBlock Text="{Binding Email}"
                                           Foreground="{StaticResource TextBrush}"
                                           FontSize="13" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding SubscriptionStatusText}"
                                           Foreground="{StaticResource AccentBrush}"
                                           FontSize="12" />
                                <TextBlock Text="{Binding TrialDaysRemainingText}"
                                           Foreground="{StaticResource WarningBrush}"
                                           FontSize="12"
                                           Margin="12,0,0,0"
                                           Visibility="{Binding IsTrialActive, Converter={x:Static views:BoolToVisibilityConverter.Instance}, FallbackValue=Collapsed}" />
                            </StackPanel>
                        </StackPanel>

                        <Button Grid.Column="1"
                                Content="Upgrade"
                                Style="{StaticResource AccentButtonStyle}"
                                Command="{Binding UpgradeCommand}"
                                VerticalAlignment="Center"
                                Visibility="{Binding CanUpgrade, Converter={x:Static views:BoolToVisibilityConverter.Instance}, FallbackValue=Visible}" />
                    </Grid>
                </Border>

                <!-- General -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="General" Style="{StaticResource SectionHeaderStyle}" />

                        <CheckBox Style="{StaticResource DarkCheckBoxStyle}"
                                  Content="Start with Windows"
                                  IsChecked="{Binding StartupOnBoot}" />

                        <TextBlock Text="HISTORY LIMIT" Style="{StaticResource FieldLabelStyle}" />
                        <TextBox Style="{StaticResource DarkTextBoxStyle}"
                                 Text="{Binding HistoryLimit, UpdateSourceTrigger=PropertyChanged}"
                                 Width="120"
                                 HorizontalAlignment="Left"
                                 Margin="0,0,0,4" />
                        <TextBlock Text="Maximum number of clipboard entries to keep"
                                   Style="{StaticResource HintTextStyle}" />
                    </StackPanel>
                </Border>

                <!-- Hotkeys -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Hotkeys" Style="{StaticResource SectionHeaderStyle}" />

                        <!-- Clipboard Tray Hotkey -->
                        <TextBlock Text="CLIPBOARD TRAY" Style="{StaticResource FieldLabelStyle}" />
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     Style="{StaticResource DarkTextBoxStyle}"
                                     Text="{Binding ClipboardTrayHotkey, Mode=OneWay}"
                                     IsReadOnly="True"
                                     Margin="0,0,8,0" />
                            <Button Grid.Column="1"
                                    Content="{Binding RecordClipboardTrayText}"
                                    Style="{StaticResource BaseButtonStyle}"
                                    Command="{Binding RecordClipboardTrayHotkeyCommand}" />
                        </Grid>

                        <!-- Snippet Picker Hotkey -->
                        <TextBlock Text="SNIPPET PICKER" Style="{StaticResource FieldLabelStyle}" />
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     Style="{StaticResource DarkTextBoxStyle}"
                                     Text="{Binding SnippetPickerHotkey, Mode=OneWay}"
                                     IsReadOnly="True"
                                     Margin="0,0,8,0" />
                            <Button Grid.Column="1"
                                    Content="{Binding RecordSnippetPickerText}"
                                    Style="{StaticResource BaseButtonStyle}"
                                    Command="{Binding RecordSnippetPickerHotkeyCommand}" />
                        </Grid>

                        <!-- Paste Last Hotkey -->
                        <TextBlock Text="PASTE LAST" Style="{StaticResource FieldLabelStyle}" />
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     Style="{StaticResource DarkTextBoxStyle}"
                                     Text="{Binding PasteLastHotkey, Mode=OneWay}"
                                     IsReadOnly="True"
                                     Margin="0,0,8,0" />
                            <Button Grid.Column="1"
                                    Content="{Binding RecordPasteLastText}"
                                    Style="{StaticResource BaseButtonStyle}"
                                    Command="{Binding RecordPasteLastHotkeyCommand}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Formatting -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Formatting" Style="{StaticResource SectionHeaderStyle}" />

                        <TextBlock Text="DEFAULT MODE" Style="{StaticResource FieldLabelStyle}" />
                        <UniformGrid Columns="3" Rows="1" Margin="0,0,0,8">
                            <RadioButton Content="Keep Original"
                                         Style="{StaticResource ToggleRadioStyle}"
                                         IsChecked="{Binding IsKeepOriginalMode}"
                                         Margin="0,0,6,0" />
                            <RadioButton Content="Destination"
                                         Style="{StaticResource ToggleRadioStyle}"
                                         IsChecked="{Binding IsDestinationMode}"
                                         Margin="0,0,6,0" />
                            <RadioButton Content="Merge (Beta)"
                                         Style="{StaticResource ToggleRadioStyle}"
                                         IsChecked="{Binding IsMergeMode}" />
                        </UniformGrid>
                    </StackPanel>
                </Border>

                <!-- Templates -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Templates" Style="{StaticResource SectionHeaderStyle}" />

                        <TextBlock Text="DATE FORMAT" Style="{StaticResource FieldLabelStyle}" />
                        <TextBox Style="{StaticResource DarkTextBoxStyle}"
                                 Text="{Binding DateFormat, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="0,0,0,2" />
                        <TextBlock Text="{Binding DateFormatExample}"
                                   Style="{StaticResource HintTextStyle}"
                                   Margin="0,0,0,12" />

                        <TextBlock Text="TIME FORMAT" Style="{StaticResource FieldLabelStyle}" />
                        <TextBox Style="{StaticResource DarkTextBoxStyle}"
                                 Text="{Binding TimeFormat, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="0,0,0,2" />
                        <TextBlock Text="{Binding TimeFormatExample}"
                                   Style="{StaticResource HintTextStyle}" />
                    </StackPanel>
                </Border>

                <!-- Delimiters -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Delimiters" Style="{StaticResource SectionHeaderStyle}" />

                        <TextBlock Text="DELIMITER TRIGGERS" Style="{StaticResource FieldLabelStyle}" />
                        <TextBox Style="{StaticResource DarkTextBoxStyle}"
                                 Text="{Binding DelimiterTriggers, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="0,0,0,2" />
                        <TextBlock Text="Characters that trigger snippet expansion"
                                   Style="{StaticResource HintTextStyle}" />
                    </StackPanel>
                </Border>

                <!-- Data -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Data" Style="{StaticResource SectionHeaderStyle}" />

                        <StackPanel Orientation="Horizontal">
                            <Button Content="Export Snippets"
                                    Style="{StaticResource BaseButtonStyle}"
                                    Command="{Binding ExportSnippetsCommand}"
                                    Margin="0,0,8,0" />
                            <Button Content="Import Snippets"
                                    Style="{StaticResource BaseButtonStyle}"
                                    Command="{Binding ImportSnippetsCommand}" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Bottom bar -->
        <Border Grid.Row="1"
                Background="#181825"
                Padding="24,12"
                BorderBrush="#45475A"
                BorderThickness="0,1,0,0">
            <Grid>
                <Button Content="Reset Defaults"
                        Style="{StaticResource BaseButtonStyle}"
                        Command="{Binding ResetDefaultsCommand}"
                        HorizontalAlignment="Left" />
                <Button Content="Save"
                        Style="{StaticResource AccentButtonStyle}"
                        Command="{Binding SaveCommand}"
                        HorizontalAlignment="Right" />
            </Grid>
        </Border>
    </Grid>
</Window>
